<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Apology ‚Äî Make It Right</title>
  <style>
    :root{ --bg:#0b1220; --card:#071018; --accent:#ff7a6b; --accent2:#7ee3b8; --muted:rgba(255,255,255,0.7); font-family:Inter, system-ui, -apple-system, Helvetica, Arial; }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#07121a,#08131d);color:#eaf6f1}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:36px}
    .card{width:100%;max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:14px;padding:22px;box-shadow:0 10px 40px rgba(2,6,23,0.6);display:grid;grid-template-columns:1fr 360px;gap:18px}
    h1{margin:0;font-size:24px}
    p.lead{margin:6px 0 14px;color:var(--muted)}
    .left{display:flex;flex-direction:column;gap:12px}
    .controls{display:flex;gap:10px;flex-wrap:wrap}
    button.primary{background:linear-gradient(90deg,var(--accent),#ff6a5a);border:0;color:#111;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:9px 12px;border-radius:10px;color:var(--muted);cursor:pointer}
    textarea{width:100%;min-height:96px;border-radius:10px;padding:12px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;resize:vertical}
    .panel{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
    ul{margin:6px 0 0;padding-left:18px;color:var(--muted)}
    .small{font-size:13px;padding:8px 10px}
    footer{grid-column:1/-1;margin-top:8px;color:var(--muted);font-size:13px;text-align:center}

    .gesture{display:flex;gap:8px;align-items:center}
    .flower{width:64px;height:64px;border-radius:12px;background:linear-gradient(180deg,#ffdde1,#ffdbe6);display:flex;align-items:center;justify-content:center;color:#3b0d1a;font-weight:700}

    @media (max-width:920px){.card{grid-template-columns:1fr;}.left{order:1}.right{order:2}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="Apology helper">
      <div class="left">
        <h1>Make it right ‚Äî apology builder</h1>
        <p class="lead">You messed up. Fine. Say sorry like you mean it. Pick a tone, craft an honest message, and deliver a small gesture (virtual or real).</p>

        <div class="panel">
          <label><strong>Pick the tone</strong></label>
          <div class="controls" style="margin-top:8px">
            <button class="ghost small" data-tone="sincere">Sincere</button>
            <button class="ghost small" data-tone="light">Light + Warm</button>
            <button class="ghost small" data-tone="direct">Straightforward</button>
            <button class="ghost small" data-tone="playful">Playful (if it fits)</button>
          </div>
        </div>

        <div class="panel">
          <label><strong>Customize: Who & What</strong></label>
          <input id="who" placeholder="Their name (e.g., Sara)" style="width:100%;padding:10px;border-radius:8px;margin-top:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit" />
          <textarea id="rawReason" placeholder="What happened? Be brief and honest. Don't hide behind excuses."></textarea>

          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="primary" id="buildBtn">Build Apology</button>
            <button class="ghost" id="resetBtn">Reset</button>
          </div>
        </div>

        <div class="panel">
          <label><strong>Your Apology</strong></label>
          <textarea id="apologyOut" readonly placeholder="Your apology will appear here"></textarea>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="primary" id="copyBtn">Copy</button>
            <button class="ghost" id="sendBtn">Open Message</button>
            <button class="ghost" id="smsBtn">Generate SMS</button>
          </div>
          <div style="margin-top:8px;color:var(--muted);font-size:13px">Tip: Keep it short. Own the mistake, express regret, propose a fix, and don't demand forgiveness.</div>
        </div>

      </div>

      <aside class="right">
        <div class="panel">
          <h3 style="margin:0">Tiny gestures</h3>
          <p style="margin:6px 0;color:var(--muted)">Pick a small thing to send or do ‚Äî actions carry weight.</p>
          <ul>
            <li>Send flowers / a snack delivery.</li>
            <li>Offer to meet and listen for 15 minutes.</li>
            <li>Make a small, thoughtful playlist.</li>
            <li>Write a short hand-written note.</li>
          </ul>
          <div style="display:flex;gap:8px;margin-top:12px">
            <div class="gesture" style="flex:1">
              <div class="flower">üå∏</div>
              <div style="flex:1;margin-left:8px;color:var(--muted)"><strong>Virtual bouquet</strong><div style="font-size:13px">Send a quick gif or image and a sincere line</div></div>
            </div>
          </div>
        </div>

        <div class="panel" style="margin-top:12px">
          <h4 style="margin:0">Quick templates</h4>
          <ul id="templates">
            <li><button class="ghost small" data-tpl="sincereTpl">Sincere: "[Name], I was wrong about [what]. I'm sorry. I understand how that hurt you and I want to make it right. Can we talk?"</button></li>
            <li><button class="ghost small" data-tpl="directTpl">Direct: "[Name], I messed up. I'm sorry. I take responsibility and I'll do [fix]."</button></li>
            <li><button class="ghost small" data-tpl="lightTpl">Light: "Hey [Name], I screwed this up ‚Äî sorry. Can I make it up to you with coffee and one apology emoji? ‚òïüôè"</button></li>
          </ul>
        </div>

        <div class="panel" style="margin-top:12px">
          <h4 style="margin:0">Calm Tone</h4>
          <p style="margin:6px 0;color:var(--muted)">Play a short calm sound to steady yourself before sending.</p>
          <div style="display:flex;gap:8px"><button class="ghost small" id="playTone">Play</button><button class="ghost small" id="stopTone">Stop</button></div>
        </div>
      </aside>

      <footer>Honest, concise, action-oriented. Want me to include a line that asks for a specific fix or boundary? Click Build and I'll add it.</footer>
    </div>
  </div>

  <script>
    // State
    let tone = 'sincere';
    const toneButtons = document.querySelectorAll('[data-tone]');
    toneButtons.forEach(b=> b.addEventListener('click', ()=>{ tone = b.getAttribute('data-tone'); toneButtons.forEach(x=>x.style.border='1px solid rgba(255,255,255,0.04)'); b.style.border='1px solid rgba(255,255,255,0.12)'; }));

    const buildBtn = document.getElementById('buildBtn');
    const resetBtn = document.getElementById('resetBtn');
    const who = document.getElementById('who');
    const rawReason = document.getElementById('rawReason');
    const apologyOut = document.getElementById('apologyOut');
    const copyBtn = document.getElementById('copyBtn');
    const sendBtn = document.getElementById('sendBtn');
    const smsBtn = document.getElementById('smsBtn');

    function clean(s){ return s.trim(); }

    function buildApology(){
      const n = clean(who.value) || '[Name]';
      const reason = clean(rawReason.value) || '[what I did]';
      let message = '';
      if (tone === 'sincere'){
        message = `${n}, I owe you an apology. I was wrong about ${reason}. I'm truly sorry for how that affected you. I take responsibility and I'd like to make it right ‚Äî would you be open to talking or is there something I can do to fix this?`;
      } else if (tone === 'light'){
        message = `${n}, I messed up and I'm sorry about ${reason}. I didn't mean to hurt you. Can I make it up to you with coffee (or your favourite snack) and a proper apology?`;
      } else if (tone === 'direct'){
        message = `${n}, I messed up. Specifically: ${reason}. I'm sorry. I'll [do this fix]. I accept responsibility.`;
      } else { // playful
        message = `${n}, guilty as charged ‚Äî I messed up with ${reason}. I'm sorry. Let me try to earn one forgiveness point (redeemable for a bad joke or a coffee).`;
      }
      apologyOut.value = message;
    }

    buildBtn.addEventListener('click', ()=>{ buildApology(); playTone(220,0.6); });
    resetBtn.addEventListener('click', ()=>{ who.value=''; rawReason.value=''; apologyOut.value=''; });

    copyBtn.addEventListener('click', ()=>{ apologyOut.select(); document.execCommand('copy'); copyBtn.textContent='Copied'; setTimeout(()=>copyBtn.textContent='Copy',1200); });

    sendBtn.addEventListener('click', ()=>{
      const text = encodeURIComponent(apologyOut.value || '');
      window.open('mailto:?subject=I\'d like to apologize&body='+text, '_blank');
    });

    smsBtn.addEventListener('click', ()=>{
      const text = encodeURIComponent(apologyOut.value || '');
      // opens default sms on mobile, on desktop it may do nothing ‚Äî still provide link
      window.open('sms:?&body='+text,'_blank');
    });

    // Templates
    document.getElementById('templates').addEventListener('click',(e)=>{
      const btn = e.target.closest('button'); if(!btn) return; const tpl = btn.getAttribute('data-tpl'); let val='';
      if(tpl==='sincereTpl') val='[Name], I was wrong about [what]. I\'m sorry. I understand how that hurt you and I want to make it right. Can we talk?';
      if(tpl==='directTpl') val='[Name], I messed up. I\'m sorry. I take responsibility and I\'ll do [fix].';
      if(tpl==='lightTpl') val='Hey [Name], I screwed this up ‚Äî sorry. Can I make it up to you with coffee and a real apology? ‚òï';
      rawReason.value = val; buildApology();
    });

    // Simple WebAudio tone
    let audioCtx=null, masterGain=null;
    function ensureAudio(){ if (!audioCtx){ audioCtx = new (window.AudioContext||window.webkitAudioContext)(); masterGain = audioCtx.createGain(); masterGain.gain.value = 0.06; masterGain.connect(audioCtx.destination);} }
    let toneOsc=null;
    function playTone(freq,dur){ try{ ensureAudio(); if(toneOsc){ toneOsc.stop(); toneOsc=null;} toneOsc = audioCtx.createOscillator(); toneOsc.type='sine'; toneOsc.frequency.value = freq; const g = audioCtx.createGain(); toneOsc.connect(g); g.connect(masterGain); g.gain.setValueAtTime(0, audioCtx.currentTime); g.gain.linearRampToValueAtTime(0.05,audioCtx.currentTime+0.02); toneOsc.start(); g.gain.linearRampToValueAtTime(0.0001,audioCtx.currentTime+dur); setTimeout(()=>{ try{ toneOsc.stop(); }catch(e){} toneOsc=null; }, dur*1000+50); }catch(e){}
    }
    document.getElementById('playTone').addEventListener('click', ()=> playTone(220,2.5));
    document.getElementById('stopTone').addEventListener('click', ()=>{ if (toneOsc) try{ toneOsc.stop(); }catch(e){} toneOsc=null; });

    // keyboard quick build
    window.addEventListener('keydown',(e)=>{ if(e.key==='Enter' && (e.metaKey||e.ctrlKey)){ e.preventDefault(); buildApology(); } });

    // Small accessibility
    document.querySelectorAll('button').forEach(b=>{ b.addEventListener('focus', ()=>b.style.outline='2px solid rgba(255,255,255,0.06)'); b.addEventListener('blur', ()=>b.style.outline='none'); });
  </script>
</body>
</html>
